<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <title>Domain up for grabs</title>
    <link rel="stylesheet" href="/simple.min.css">
    <link rel="icon" href="favicon.svg">    
  </head>
  <body>
    <h1>This domain for sale</h1>
    <p>Contact <a href="mailto:webmaster@example.com">Jon Doe</a> for information</p>
    <p>Payment via crypto <a href="https://opensats.org/projects/btcpayserver"> example</a></p>
    <ul id="domains">      
    </ul>
  </body>
  <script>
    // change http to https
    if (location.protocol !== 'https:') {
      location.replace(`https:${location.href.substring(location.protocol.length)}`);
    }
    (async () => {
    const response = await fetch("https://gist.githubusercontent.com/vanrohan/a0b816339c49d5bb4c89d0cf0c1e8cc2/raw/795d8b3955f6c6cf5117745bef199becd5a53184/domains.json");
    const domains = await response.json();
    const ul = document.getElementById("domains");
    for(var i = 0; i < domains.length; i++ )
    { 
        const name = domains[i];
        const li = document.createElement("li");

        const a = document.createElement('a');
        const linkText = document.createTextNode(name);
      
        a.appendChild(linkText);
        a.title = `visit ${name}`;
        a.href = `https://${name}`;
        li.appendChild(a);
        ul.appendChild(li);     
    }
    })(); //iife until proposal goes through https://github.com/tc39/proposal-top-level-await
  </script>
</html>
